function $function(e,t,n){function r(e){e=e.replace(/^\s*/,"").replace(/\s*$/,"").replace(/^\([^\(\)]*\)$/,"");if(e.match(/[Tt][Rr][Uu][Ee]/))return true;if(e.match(/[Ff][Aa][Ll][Ss]/))return false;if(e.match(/\d+>=\d+/)&&e.match(/(\d+)>=\d+/)[1]>=e.match(/\d+>=(\d+)/)[1])return true;if(e.match(/\d+<\d+/)&&e.match(/(\d+)<\d+/)[1]<e.match(/\d+<(\d+)/)[1])return true;if(e.match(/\d+>\d+/)&&e.match(/(\d+)>\d+/)[1]>e.match(/\d+>(\d+)/)[1])return true;if(e.match(/\d+<=\d+/)&&e.match(/(\d+)<=\d+/)[1]<=e.match(/\d+<=(\d+)/)[1])return true;if(e.match(/\w+="\w+"/)&&e.match(/(\w+)="\w+"/)[1]==e.match(/\w+="(\w+)"/)[1])return true;return false}function i(e){var t=[];if(c){if(e.match(/\}/))c=false;else t=["subReturn",e.replace(/;\s*;/,";").replace(/^\s*/,"")]}else if(e.match(/^if/)){if(r(e.match(/^if(.+){/)[1]))t=["if",true];else t=["if",false]}else if(e.match(/^else/)){if((e.match(/^else\s*if/)&&r(e.match(/^else\s*if(.+){/)[1])||!e.match(/^else\s*if/))&&!a[u])t=["if",true];else t=["if",false]}else if(e.match(/^\$return\s*:/)){t=["return",(e.match(/^[\$£]return\s*:(.*)$/)[1]+";").replace(/;\s*;/,";").replace(/^\s*/,"")]}else if(e.match(/^£return\s*:/)){c=true;t=["startReturn"]}if(t[0]=="if"&&t[1])a[u]=true;else if(t[0]!="if")a[u]=false;if(e.match(/\{/))u++;else if(e.match(/\}/)){delete a.splice(u,1);if(f&&f>=u)f=false;u--;t=["endBrace"]}return t}e=e.replace(/\$input/g,t).replace(/;\s*(.)/g,";\n$1").replace(/\}\s*(.)/g,"}\n$1").replace(/(.)\s*\}/g,"$1\n}").replace(/(.)\s*\{/g,"$1 {").replace(/\n[\t ]*\n/g,"\n").replace(/\s*$/g,"").replace(/^\s*/g,"");var s=e.split("\n"),o=0,u=0,a=[false],f=false,l=[],c=false,h="";while(o<s.length){s[o]=s[o].replace(/^\s*/,"");l=i(s[o]);if(f&&u>=f){o++;continue}if(l[0]=="if"&&l[1]==false)f=u;else if(l[0]=="return")h=l[1];else if(l[0]=="subReturn")h+=l[1];o++}e=s.join("\n");return h}function styleFile(e){var t="";$.ajax({url:e,success:function(e){var t=$(document.createElement("style"));$(document.head).append(t);var n=e.split("\n");for(var r in n)n[r]=n[r].replace(/^[ \t]*/g,"").replace(/[ \t]*$/g,"").replace(/([^{};,\\])$/g,"$1;");e=n.join("\n").replace(/[}][\n\r]*(.)/g,"}\n\n$1").replace(/([{;])[\n\r]*([^\s}])/g,"$1\n	$2").replace(/[\,]\\n*\r*\n*\t*(\w)/g," $1");var i=0,s={pound:{},dollar:{},functions:{}},o={},u=e;for(var r in e){r=parseInt(r);if(i>0){i--;continue}if(e[r]=="@"&&e[r]+e[r+1]+e[r+2]+e[r+3]+e[r+4]=="@vars"){var a=4;while(e[r+a]!="{"){a++}var f=1;a++;while(f!=0&&e.length>r+a){if(e[r+a]=="{")f++;else if(e[r+a]=="}")f--;else if(e[r+a]=="£")s.pound[e.substring(r+a).match(/^£([\w-_]+):/)[1]]=e.substring(r+a+e.substring(r+a).match(/^£([\w-_]+):\s*?{/)[0].length).match(/^([^{}]*?)}/)[1];else if(e[r+a]=="$"){a++;if(e[r+a]=="$"){var l=1,c=e.substring(r+a).match(/^\$([\w-_]+)\(\): *?{/)[0].length,h="";while(l!=0&&e.length>r+a+c){if(e[r+a+c]=="{")l++;else if(e[r+a+c]=="}")l--;h+=e[r+a+c];c++}s.functions[e.substring(r+a).match(/^\$([\w-_]+)\(\):/)[1]]=h.match(/^([\s\S]*)\}\s*$/)[1];a+=c}else{s.dollar[e.substring(r+a).match(/^([\w-_]+):/)[1]]=e.substring(r+a+e.substring(r+a).match(/^([\w-_]+):\s*?/)[0].length).match(/^([^{}]*?);/)[1]}}a++}i+=a;u=e.substring(0,r)+e.substring(r+a)}}e=u;var p=e.length;while(e.match(/[\$£]/)&&p>0){for(var r in s.functions){e=e.replace(new RegExp("\\$\\$"+r+"\\((\\w*)\\)","g"),function(e,t){return $function(s.functions[r],t,r)})}for(var r in s.pound)e=e.replace(new RegExp("£"+r,"g"),s.pound[r]);for(var r in s.dollar)e=e.replace(new RegExp("\\$"+r,"g"),s.dollar[r]);p--}e=e.replace(/;\s*;/g,";");$(t).html(e)},dataType:"text"})}
